<ion-header>
  <ion-toolbar>
    <ion-title>{{ getCurrentTitle() }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- TODO: Step '0' with small tutorial for first time users -->

  <!-- Step 1 -->
  <div *ngIf="currentStep === 1" style="height: 100%">
    <agm-map *ngIf="coords" [latitude]="coords.latitude" [longitude]="coords.longitude" [zoom]="20"
      disableDefaultUI="true" mapTypeId="hybrid" style="height: 100%">
      <agm-marker [latitude]=" coords.latitude" [longitude]="coords.longitude">
      </agm-marker>
    </agm-map>
  </div>

  <!-- Step 2 -->
  <div *ngIf="currentStep === 2" style="height: 100%">
    <div id="prompt-or-selected-container">
      <div id="prompt-or-selected-picture" style="width: 60%">
        <img *ngIf="picture" [src]="picture" alt="Loaded Picture">
        <svg *ngIf="!picture" style="opacity: 10%; width: 100%;" xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 352 352">
          <defs />
          <path
            d="M333 16a56 56 0 00-40-16h-54v22h53a35 35 0 0135 35v57h22V56c0-15-6-29-16-40zM35 320c-6-6-10-15-10-25v-57H3v58c0 15 7 29 17 40 11 10 25 16 40 16h54v-22H60c-9 0-18-4-25-10zM327 296a35 35 0 01-35 35h-53v21h53c16 0 30-6 40-16 11-10 17-24 17-40v-58h-22v58zM20 16A56 56 0 004 56v58h21V56c0-9 4-18 11-24 6-7 15-11 25-11h53V0H60C45 0 31 6 20 16z" />
        </svg>
      </div>
      <input #imginput type="file" accept="image/*" id="capture" capture="camera" style="display: none"
        (change)="onInputChange($event.target.files)">
    </div>

    <div id="taken-pictures">
      <span>
        <img src="https://4.img-dpreview.com/files/p/E~TS590x0~articles/3925134721/0266554465.jpeg" alt="">
      </span>
      <span>
        <img src="https://fdn.gsmarena.com/imgroot/news/19/10/meizu-16t-camera-sample/-640/gsmarena_002.jpg" alt="">
      </span>
      <span>
        <img src="https://4.img-dpreview.com/files/p/E~TS590x0~articles/3925134721/0266554465.jpeg" alt="">
      </span>
      <span>
        <img src="https://www.cameraegg.org/wp-content/uploads/2013/02/Leica-M-Sample-Image.jpg" alt="">
      </span>
      <span>
        <img
          src="https://imgsv.imaging.nikon.com/lineup/lens/f-mount/zoom/normalzoom/af-s_dx_18-300mmf_35-56g_ed_vr/img/sample/sample4_l.jpg"
          alt="">
      </span>
      <span>
        <img src="https://www.visioncritical.com/hubfs/Imported_Blog_Media/BLG_Andrew-G_-River-Sample_09_13_12.png"
          alt="">
      </span>
      <span>
        <img src="http://grafinoticias.com.mx/wp-content/uploads/2018/10/Nikon-1-V3-sample-photo.jpg" alt="">
      </span>
      <span>
        <img src="https://www.cameraegg.org/wp-content/uploads/2013/02/Leica-M-Sample-Image.jpg" alt="">
      </span>
    </div>
  </div>

  <!-- Step 3 -->
  <div *ngIf="currentStep === 3" style="height: 100%;">
    <ion-list>
      <ion-list-header>
        Acerca de la Observación
      </ion-list-header>

      <ion-item>
        <ion-label>Fecha</ion-label>
        <ion-datetime displayFormat="DD/MMM/YY" pickerFormat="DD MMM YY" [value]="date" yearValues="2019,2020,2021"
          cancel-text="Cancelar" done-text="Aceptar">
        </ion-datetime>
      </ion-item>

      <ion-item lines="full">
        <ion-label>Dirección</ion-label>
        <ion-spinner *ngIf="!address" name="crescent"></ion-spinner>
        <ion-label *ngIf="address"> {{ address }}</ion-label>
      </ion-item>
    </ion-list>

    <ion-list>
      <ion-list-header>
        Acerca del Árbol
      </ion-list-header>
      <ion-item lines="full">
        <ion-label>Nombre</ion-label>
      </ion-item>

      <ion-item>
        <ion-label position="floating">
          Diámetro
        </ion-label>
        <ion-input></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">
          Altura
        </ion-label>
        <ion-input></ion-input>
      </ion-item>

      <ion-item>
        <ion-label>
          Fenología
        </ion-label>
        <ion-select multiple cancel-text="Cancelar" ok-text="Ok">
          <ion-select-option value="caida-hojas">Caida Hojas</ion-select-option>
          <ion-select-option value="floracion">Floración</ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label>
          Síntomas
        </ion-label>
        <ion-select multiple cancel-text="Cancelar" ok-text="Ok">
          <ion-select-option value="amarillamiento-hojas">Amarillamiento de Hojas</ion-select-option>
          <ion-select-option value="escoba-de-brujas">Escoba de Brujas</ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label>
          Sanidad
        </ion-label>
        <ion-select cancel-text="Cancelar" ok-text="Ok">
          <ion-select-option value="muy-buena">Muy Buena</ion-select-option>
          <ion-select-option value="buena">Buena</ion-select-option>
          <ion-select-option value="mala">Mala</ion-select-option>
          <ion-select-option value="muerta">Muerto</ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item lines="full">
        <ion-label>
          Poda Correcta
        </ion-label>
        <ion-checkbox slot="end"></ion-checkbox>
      </ion-item>
    </ion-list>

    <ion-list>
      <ion-list-header>
        Adicionales
      </ion-list-header>

      <ion-item lines="none">
        <ion-label>
          Tutor
        </ion-label>
        <ion-checkbox slot="end"></ion-checkbox>
      </ion-item>

      <ion-item (click)="onAddComments()" lines="none" button detail>
        <ion-label>
          Añadir Comentarios
        </ion-label>
      </ion-item>

    </ion-list>
  </div>

</ion-content>

<ion-footer class="ion-padding-horizontal">
  <ion-toolbar>
    <ion-button slot="start" color="danger" [disabled]="currentStep == 1" (click)="onGoBackClick()">Volver</ion-button>
    <ion-button *ngIf="currentStep !== 3" slot="end" (click)="onContinueClick()">Continuar</ion-button>
    <ion-button *ngIf="currentStep === 3" slot="end" (click)="onFinishClick()">Finalizar</ion-button>
  </ion-toolbar>
</ion-footer>